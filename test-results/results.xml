<testsuites id="" name="" tests="3" failures="1" skipped="0" errors="0" time="4.6761989999999996">
<testsuite name="setup.setup.js" timestamp="2025-08-01T04:36:32.611Z" hostname="setup" tests="1" failures="0" skipped="0" time="1.725" errors="0">
<testcase name="verify system dependencies" classname="setup.setup.js" time="1.725">
<system-out>
<![CDATA[üîß Setting up DiagnosticPro MVP test environment...
‚úÖ Google Cloud project: 157908567967
üöÄ Verifying application startup...
‚úÖ Landing page accessible
üöÄ Navigating to diagnostic form page...
‚úÖ Perfect diagnostic form elements present
üéâ Setup complete - ready for comprehensive testing!
]]>
</system-out>
<system-err>
<![CDATA[‚ùå Google Cloud authentication issue: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

Expected: [32m"diagnostic-pro-mvp"[39m
Received: [31m"157908567967"[39m
]]>
</system-err>
</testcase>
</testsuite>
<testsuite name="verify-database-save.test.js" timestamp="2025-08-01T04:36:32.611Z" hostname="chromium" tests="2" failures="1" skipped="0" time="0.261" errors="0">
<testcase name="Database Save Verification ‚Ä∫ Form submission saves to database BEFORE AI analysis" classname="verify-database-save.test.js" time="0.226">
<failure message="verify-database-save.test.js:4:3 Form submission saves to database BEFORE AI analysis" type="FAILURE">
<![CDATA[  [chromium] ‚Ä∫ verify-database-save.test.js:4:3 ‚Ä∫ Database Save Verification ‚Ä∫ Form submission saves to database BEFORE AI analysis 

    Error: expect(received).toBeDefined()

    Received: undefined

      37 |     
      38 |     // Verify we got AI analysis (proves database save didn't block workflow)
    > 39 |     expect(responseData.analysisPreview).toBeDefined();
         |                                          ^
      40 |     expect(responseData.analysisPreview.diagnosis).toBeTruthy();
      41 |     
      42 |     console.log('‚úÖ DATABASE SAVE CONFIRMED - Workflow is:');
        at /home/jeremylongshore/diagnostic-pro-mvp/tests/verify-database-save.test.js:39:42

    attachment #1: trace (application/zip) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    ../test-results/verify-database-save-Datab-275b2-database-BEFORE-AI-analysis-chromium/trace.zip
    Usage:

        npx playwright show-trace ../test-results/verify-database-save-Datab-275b2-database-BEFORE-AI-analysis-chromium/trace.zip

    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    Retry #1 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    Error: expect(received).toBeDefined()

    Received: undefined

      37 |     
      38 |     // Verify we got AI analysis (proves database save didn't block workflow)
    > 39 |     expect(responseData.analysisPreview).toBeDefined();
         |                                          ^
      40 |     expect(responseData.analysisPreview.diagnosis).toBeTruthy();
      41 |     
      42 |     console.log('‚úÖ DATABASE SAVE CONFIRMED - Workflow is:');
        at /home/jeremylongshore/diagnostic-pro-mvp/tests/verify-database-save.test.js:39:42

    attachment #1: trace (application/zip) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    ../test-results/verify-database-save-Datab-275b2-database-BEFORE-AI-analysis-chromium-retry1/trace.zip
    Usage:

        npx playwright show-trace ../test-results/verify-database-save-Datab-275b2-database-BEFORE-AI-analysis-chromium-retry1/trace.zip

    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
]]>
</failure>
<system-out>
<![CDATA[üîç TESTING DATABASE SAVE WORKFLOW...
üìù Submitting test form data...
üìä API Response: {
  "success": true,
  "message": "Analysis completed but email delivery failed. Please contact support.",
  "analysis": {
    "diagnosis": "Based on the symptoms described, there is a 85% probability that this is a fuel system or engine management issue. The symptoms suggest fuel delivery problems or sensor malfunctions.",
    "issue": "Customer reports TEST: Verifying database save before AI - Engine making noise on 2020 Toyota Camry. Error codes present: P0301",
    "rootCause": "Based on the symptoms described, there is a 85% probability that this is a fuel system or engine management issue. The symptoms suggest fuel delivery problems or sensor malfunctions.",
    "verificationTests": "1. Perform comprehensive diagnostic scan with professional equipment\n2. Check fluid levels and quality (oil, hydraulic, coolant as applicable)\n3. Inspect electrical connections and battery condition\n4. Test system pressures and temperatures under load\n5. Verify component operation through manufacturer diagnostic procedures",
    "redFlags": "- Shops that quote major repairs without proper diagnostic testing\n- Estimates that seem unusually high compared to market rates\n- Reluctance to explain the specific problem or show failed parts\n- Pressure to authorize expensive work immediately",
    "questionsToAsk": "1. \"Can you show me exactly what diagnostic tests you performed?\"\n2. \"What specific component failed and can I see the damaged part?\"\n3. \"How does your quote compare to manufacturer suggested repair times?\"\n4. \"What warranty do you provide on this specific repair?\"\n5. \"Are there any alternative repair options or used parts available?\"",
    "costEstimate": "Based on current market rates:\n- Diagnostic fee: $150-250\n- Parts: $300-1,200 (depending on specific component)\n- Labor: $120-180/hour (2-6 hours typical)\n- **Total estimated range: $450-2,500**\n\n*Note: This is a temporary mock analysis. Full AI diagnostic system will be restored shortly with enhanced accuracy and personalized recommendations.*",
    "urgencyLevel": "medium",
    "analysisTimestamp": "2025-08-01T04:36:35.231Z",
    "rawResponse": "**DiagnosticPro Report**\n\n**Issue**: Customer reports TEST: Verifying database save before AI - Engine making noise on 2020 Toyota Camry. Error codes present: P0301\n\n**Most Likely Root Cause**: Based on the symptoms described, there is a 85% probability that this is a fuel system or engine management issue. The symptoms suggest fuel delivery problems or sensor malfunctions.\n\n**Verification Tests**: \n1. Perform comprehensive diagnostic scan with professional equipment\n2. Check fluid levels and quality (oil, hydraulic, coolant as applicable)\n3. Inspect electrical connections and battery condition\n4. Test system pressures and temperatures under load\n5. Verify component operation through manufacturer diagnostic procedures\n\n**Red Flags**: \n- Shops that quote major repairs without proper diagnostic testing\n- Estimates that seem unusually high compared to market rates\n- Reluctance to explain the specific problem or show failed parts\n- Pressure to authorize expensive work immediately\n\n**Questions to Ask the Shop**:\n1. \"Can you show me exactly what diagnostic tests you performed?\"\n2. \"What specific component failed and can I see the damaged part?\"\n3. \"How does your quote compare to manufacturer suggested repair times?\"\n4. \"What warranty do you provide on this specific repair?\"\n5. \"Are there any alternative repair options or used parts available?\"\n\n**Fair Cost Estimate**: Based on current market rates:\n- Diagnostic fee: $150-250\n- Parts: $300-1,200 (depending on specific component)\n- Labor: $120-180/hour (2-6 hours typical)\n- **Total estimated range: $450-2,500**\n\n*Note: This is a temporary mock analysis. Full AI diagnostic system will be restored shortly with enhanced accuracy and personalized recommendations.*",
    "recommendationsHtml": "\n        <div class=\"diagnostic-pro-report\">\n          <h3>üîç Issue Analysis</h3>\n          <p>Customer reports TEST: Verifying database save before AI - Engine making noise on 2020 Toyota Camry. Error codes present: P0301</p>\n          \n          <h3>‚ö° Most Likely Root Cause</h3>\n          <p>Based on the symptoms described, there is a 85% probability that this is a fuel system or engine management issue. The symptoms suggest fuel delivery problems or sensor malfunctions.</p>\n          \n          <h3>üß™ Essential Verification Tests</h3>\n          <div>1. Perform comprehensive diagnostic scan with professional equipment\n2. Check fluid levels and quality (oil, hydraulic, coolant as applicable)\n3. Inspect electrical connections and battery condition\n4. Test system pressures and temperatures under load\n5. Verify component operation through manufacturer diagnostic procedures</div>\n          \n          <h3>üö© Red Flags to Watch For</h3>\n          <div>- Shops that quote major repairs without proper diagnostic testing\n- Estimates that seem unusually high compared to market rates\n- Reluctance to explain the specific problem or show failed parts\n- Pressure to authorize expensive work immediately</div>\n          \n          <h3>‚ùì Questions to Ask the Shop</h3>\n          <div>1. \"Can you show me exactly what diagnostic tests you performed?\"\n2. \"What specific component failed and can I see the damaged part?\"\n3. \"How does your quote compare to manufacturer suggested repair times?\"\n4. \"What warranty do you provide on this specific repair?\"\n5. \"Are there any alternative repair options or used parts available?\"</div>\n          \n          <h3>üí∞ Fair Cost Estimate</h3>\n          <div>Based on current market rates:\n- Diagnostic fee: $150-250\n- Parts: $300-1,200 (depending on specific component)\n- Labor: $120-180/hour (2-6 hours typical)\n- **Total estimated range: $450-2,500**\n\n*Note: This is a temporary mock analysis. Full AI diagnostic system will be restored shortly with enhanced accuracy and personalized recommendations.*</div>\n        </div>\n      ",
    "aiModel": "DiagnosticPro Mock AI (Fallback)"
  },
  "emailDelivered": false
}

[[ATTACHMENT|verify-database-save-Datab-275b2-database-BEFORE-AI-analysis-chromium/trace.zip]]
üîç TESTING DATABASE SAVE WORKFLOW...
üìù Submitting test form data...
üìä API Response: {
  "success": true,
  "message": "Analysis completed but email delivery failed. Please contact support.",
  "analysis": {
    "diagnosis": "Based on the symptoms described, there is a 80% probability that this is a fuel system or engine management issue. The symptoms suggest fuel delivery problems or sensor malfunctions.",
    "issue": "Customer reports TEST: Verifying database save before AI - Engine making noise on 2020 Toyota Camry. Error codes present: P0301",
    "rootCause": "Based on the symptoms described, there is a 80% probability that this is a fuel system or engine management issue. The symptoms suggest fuel delivery problems or sensor malfunctions.",
    "verificationTests": "1. Perform comprehensive diagnostic scan with professional equipment\n2. Check fluid levels and quality (oil, hydraulic, coolant as applicable)\n3. Inspect electrical connections and battery condition\n4. Test system pressures and temperatures under load\n5. Verify component operation through manufacturer diagnostic procedures",
    "redFlags": "- Shops that quote major repairs without proper diagnostic testing\n- Estimates that seem unusually high compared to market rates\n- Reluctance to explain the specific problem or show failed parts\n- Pressure to authorize expensive work immediately",
    "questionsToAsk": "1. \"Can you show me exactly what diagnostic tests you performed?\"\n2. \"What specific component failed and can I see the damaged part?\"\n3. \"How does your quote compare to manufacturer suggested repair times?\"\n4. \"What warranty do you provide on this specific repair?\"\n5. \"Are there any alternative repair options or used parts available?\"",
    "costEstimate": "Based on current market rates:\n- Diagnostic fee: $150-250\n- Parts: $300-1,200 (depending on specific component)\n- Labor: $120-180/hour (2-6 hours typical)\n- **Total estimated range: $450-2,500**\n\n*Note: This is a temporary mock analysis. Full AI diagnostic system will be restored shortly with enhanced accuracy and personalized recommendations.*",
    "urgencyLevel": "medium",
    "analysisTimestamp": "2025-08-01T04:36:35.711Z",
    "rawResponse": "**DiagnosticPro Report**\n\n**Issue**: Customer reports TEST: Verifying database save before AI - Engine making noise on 2020 Toyota Camry. Error codes present: P0301\n\n**Most Likely Root Cause**: Based on the symptoms described, there is a 80% probability that this is a fuel system or engine management issue. The symptoms suggest fuel delivery problems or sensor malfunctions.\n\n**Verification Tests**: \n1. Perform comprehensive diagnostic scan with professional equipment\n2. Check fluid levels and quality (oil, hydraulic, coolant as applicable)\n3. Inspect electrical connections and battery condition\n4. Test system pressures and temperatures under load\n5. Verify component operation through manufacturer diagnostic procedures\n\n**Red Flags**: \n- Shops that quote major repairs without proper diagnostic testing\n- Estimates that seem unusually high compared to market rates\n- Reluctance to explain the specific problem or show failed parts\n- Pressure to authorize expensive work immediately\n\n**Questions to Ask the Shop**:\n1. \"Can you show me exactly what diagnostic tests you performed?\"\n2. \"What specific component failed and can I see the damaged part?\"\n3. \"How does your quote compare to manufacturer suggested repair times?\"\n4. \"What warranty do you provide on this specific repair?\"\n5. \"Are there any alternative repair options or used parts available?\"\n\n**Fair Cost Estimate**: Based on current market rates:\n- Diagnostic fee: $150-250\n- Parts: $300-1,200 (depending on specific component)\n- Labor: $120-180/hour (2-6 hours typical)\n- **Total estimated range: $450-2,500**\n\n*Note: This is a temporary mock analysis. Full AI diagnostic system will be restored shortly with enhanced accuracy and personalized recommendations.*",
    "recommendationsHtml": "\n        <div class=\"diagnostic-pro-report\">\n          <h3>üîç Issue Analysis</h3>\n          <p>Customer reports TEST: Verifying database save before AI - Engine making noise on 2020 Toyota Camry. Error codes present: P0301</p>\n          \n          <h3>‚ö° Most Likely Root Cause</h3>\n          <p>Based on the symptoms described, there is a 80% probability that this is a fuel system or engine management issue. The symptoms suggest fuel delivery problems or sensor malfunctions.</p>\n          \n          <h3>üß™ Essential Verification Tests</h3>\n          <div>1. Perform comprehensive diagnostic scan with professional equipment\n2. Check fluid levels and quality (oil, hydraulic, coolant as applicable)\n3. Inspect electrical connections and battery condition\n4. Test system pressures and temperatures under load\n5. Verify component operation through manufacturer diagnostic procedures</div>\n          \n          <h3>üö© Red Flags to Watch For</h3>\n          <div>- Shops that quote major repairs without proper diagnostic testing\n- Estimates that seem unusually high compared to market rates\n- Reluctance to explain the specific problem or show failed parts\n- Pressure to authorize expensive work immediately</div>\n          \n          <h3>‚ùì Questions to Ask the Shop</h3>\n          <div>1. \"Can you show me exactly what diagnostic tests you performed?\"\n2. \"What specific component failed and can I see the damaged part?\"\n3. \"How does your quote compare to manufacturer suggested repair times?\"\n4. \"What warranty do you provide on this specific repair?\"\n5. \"Are there any alternative repair options or used parts available?\"</div>\n          \n          <h3>üí∞ Fair Cost Estimate</h3>\n          <div>Based on current market rates:\n- Diagnostic fee: $150-250\n- Parts: $300-1,200 (depending on specific component)\n- Labor: $120-180/hour (2-6 hours typical)\n- **Total estimated range: $450-2,500**\n\n*Note: This is a temporary mock analysis. Full AI diagnostic system will be restored shortly with enhanced accuracy and personalized recommendations.*</div>\n        </div>\n      ",
    "aiModel": "DiagnosticPro Mock AI (Fallback)"
  },
  "emailDelivered": false
}

[[ATTACHMENT|verify-database-save-Datab-275b2-database-BEFORE-AI-analysis-chromium-retry1/trace.zip]]
]]>
</system-out>
</testcase>
<testcase name="Database Save Verification ‚Ä∫ Database handles save failures gracefully" classname="verify-database-save.test.js" time="0.035">
<system-out>
<![CDATA[üîç TESTING DATABASE ERROR HANDLING...
‚úÖ Error handling works correctly
]]>
</system-out>
</testcase>
</testsuite>
</testsuites>